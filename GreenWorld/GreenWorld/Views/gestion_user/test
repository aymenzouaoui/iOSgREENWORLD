import SwiftUI

struct GestionUserProfil: View {
    @StateObject private var userViewModel = UserViewModel()
    @State private var isEditProfileActive = false
    @State private var showLogoutConfirmation = false
    @State private var navigationLinkActive: Bool = false

    var body: some View {
        NavigationView {
            ZStack {
                // Background image and other UI elements...

                // Logout Button
                Button(action: {
                    showLogoutConfirmation = true
                }) {
                    Text("Déconnecter")
                        .font(Font.custom("Inter", size: 20).weight(.bold))
                        .foregroundColor(.white)
                        .padding()
                        .frame(width: 343, height: 51)
                        .background(Color(red: 0.13, green: 0.61, blue: 0.49))
                        .cornerRadius(12)
                }
                .position(x:375,y:0)
                .alert(isPresented: $showLogoutConfirmation) {
                    Alert(
                        title: Text("Déconnexion"),
                        message: Text("Êtes-vous sûr de vouloir vous déconnecter ?"),
                        primaryButton: .destructive(Text("Déconnecter")) {
                            // Handle logout action
                            navigationLinkActive = true
                            //login.logout() // Uncomment if needed
                        },
                        secondaryButton: .cancel()
                    )
                }
                
                // Other UI elements...
            }
            .onAppear {
                userViewModel.getUser()
                print(userViewModel.getUser())
            }
        }
        .navigationBarBackButtonHidden(true)
    }
}

struct GestionUserProfil_Previews: PreviewProvider {
    static var previews: some View {
        GestionUserProfil()
    }
}
